(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{10:function(e,t,n){e.exports={wrapper:"not-found_wrapper__1aWQ2",container:"not-found_container__2vsfc",content:"not-found_content__2y_aw",spin:"not-found_spin__1T68x",spin_1:"not-found_spin_1__2Xria",spin_2:"not-found_spin_2__2roGY",spin_3:"not-found_spin_3__RT_GN",spin_4:"not-found_spin_4__22YAx",burger:"not-found_burger__k0ijm",burger_1:"not-found_burger_1__1ivhA",moving:"not-found_moving__1uCuT",burger_2:"not-found_burger_2__T6JUG",burger_3:"not-found_burger_3__1RskY",burger_4:"not-found_burger_4__2xX9N"}},104:function(e,t,n){e.exports={preloader:"preloader_preloader__3rFh_",load:"preloader_load__3EUCy"}},106:function(e,t,n){e.exports={link:"span-with-link_link__1Cw6W"}},107:function(e,t,n){e.exports={wrapper:"feed-info_wrapper__3EEM0"}},108:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__1oybW"}},109:function(e,t,n){e.exports={icon_wrapper:"order-details_icon_wrapper__34_3d"}},110:function(e,t,n){e.exports={row:"profile-form_row__16rVn"}},111:function(e,t,n){e.exports={main:"app_main__16BYi"}},124:function(e,t,n){},14:function(e,t,n){e.exports={column:"burger-constructor_column__DH4B1",column_isHover:"burger-constructor_column_isHover__337ms",title_message:"burger-constructor_title_message__hrD8U",ingredients_list:"burger-constructor_ingredients_list___3DMI",block:"burger-constructor_block__1yqhY",icon_wrapper:"burger-constructor_icon_wrapper__1Usc8",row_order:"burger-constructor_row_order__1A4it",button:"burger-constructor_button__211gr"}},15:function(e,t,n){e.exports={column:"burger-ingredients_column__2flRp",header:"burger-ingredients_header__2qRvX",blocks_container:"burger-ingredients_blocks_container__v2fSH",list:"burger-ingredients_list__29NhX",block_list:"burger-ingredients_block_list__2mxJb",block:"burger-ingredients_block__3ArTa",block_item:"burger-ingredients_block_item__2ifSp",item_link:"burger-ingredients_item_link__w8VoT",item_row:"burger-ingredients_item_row__1v4gX",item_title:"burger-ingredients_item_title__NDEG7"}},197:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(37),s=n.n(c),i=n(34),o=(n(124),n(8)),l=n(9),d=function(){return Object(i.b)()},u=i.c,j=n(203),m=n(113),b=n(5),_=n(15),p=n.n(_),O=n(4),f=[{type:"bun",name:"\u0411\u0443\u043b\u043a\u0438"},{type:"sauce",name:"\u0421\u043e\u0443\u0441\u044b"},{type:"main",name:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}],x=n(0),h=function(e){var t=e.current,n=e.setTab,a=Object(r.useMemo)((function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O.Tab,{value:f[0].type,active:"bun"===t,onClick:n,children:f[0].name}),Object(x.jsx)(O.Tab,{value:f[1].type,active:"sauce"===t,onClick:n,children:f[1].name}),Object(x.jsx)(O.Tab,{value:f[2].type,active:"main"===t,onClick:n,children:f[2].name})]})}),[t,n]);return Object(x.jsx)("div",{className:"".concat(p.a.header," mb-10"),children:a})},g=n(204),v=function(e){var t=e.id,n=e.image,r=e.name,a=e.price,c=e.count,s=e.type,i=Object(l.h)(),d=Object(g.a)({type:"ingredient",item:{id:t,type:s},collect:function(e){return{opacity:e.isDragging()?0:1}}}),u=Object(b.a)(d,2),j=(u[0].opacity,u[1]);return Object(x.jsx)(o.b,{to:{pathname:"/ingredients/".concat(t),state:{background:i}},className:p.a.item_link,children:Object(x.jsxs)("div",{ref:j,children:[Object(x.jsx)(O.Counter,{count:c,size:"default"}),Object(x.jsx)("img",{src:n,alt:r,width:"240",height:"120"}),Object(x.jsxs)("div",{className:"".concat(p.a.item_row," pt-1 pb-1"),children:[Object(x.jsx)("span",{className:"text text_type_digits-default pr-2",children:a}),Object(x.jsx)(O.CurrencyIcon,{type:"primary"})]}),Object(x.jsx)("h4",{className:"".concat(p.a.item_title," text text_type_main-default"),children:r})]})},t)},y=function(e){var t=e.children;return Object(x.jsx)("ul",{className:"".concat(p.a.block_list," ml-4"),children:t})},w=function(e){var t=e.data,n=e.name,r=e.type,a=e.refBun,c=e.refSauce,s=e.refMain,i=e.countOfIngredients;return Object(x.jsxs)("li",{className:"mt-10 ".concat(p.a.block),"data-id":r,ref:"bun"===r?a:"sauce"===r?c:s,children:[Object(x.jsx)("h3",{className:"text text_type_main-medium pb-6",children:n}),Object(x.jsx)(y,{children:t.filter((function(e){return e.type===r})).map((function(e){return Object(x.jsx)("li",{className:"".concat(p.a.block_item," mb-8"),"data-id":e._id,"data-type":r,children:Object(x.jsx)(v,{image:e.image_large,name:e.name,type:r,count:i[e._id]||0,price:e.price,id:e._id})},"".concat(e._id))}))})]})},N=function(e){var t=e.children,n=e.refContainer,r=e.scrollHandler;return Object(x.jsx)("div",{className:"pr-2 ".concat(p.a.blocks_container),ref:n,onScroll:r,"data-id":"container",children:Object(x.jsx)("ul",{className:"".concat(p.a.list),children:t})})},S=n(104),E=n.n(S),T=function(){return Object(x.jsx)("div",{className:"".concat(E.a.preloader),children:"loading"})},R=function(){var e=u((function(e){return{data:e.data.data,dataRequest:e.data.dataRequest,dataFailed:e.data.dataFailed,dataSelected:e.dataSelected.dataSelected}})),t=e.data,n=e.dataRequest,a=e.dataFailed,c=e.dataSelected,s=Object(r.useRef)(null),i=Object(r.useRef)(null),o=Object(r.useRef)(null),l=Object(r.useRef)(null),d=Object(r.useState)("bun"),j=Object(b.a)(d,2),m=j[0],_=j[1],O=function(e){var t="bun";s.current&&i.current&&o.current&&(t=s.current.scrollTop-i.current.clientHeight<0?"bun":s.current.scrollTop-i.current.clientHeight-o.current.clientHeight<0?"sauce":"main"),_(t)},g=function(e){_(e);var t="bun"===e?i.current:"sauce"===e?o.current:l.current;t&&t.scrollIntoView({behavior:"smooth"})},v=Object(r.useMemo)((function(){var e={};return c.forEach((function(t){e[t._id]||(e[t._id]=0),e[t._id]++,"bun"===t.type&&(e[t._id]=2)})),e}),[c]),y=Object(r.useMemo)((function(){return n?Object(x.jsx)(T,{}):a?Object(x.jsx)("div",{className:"text text_type_main-large",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0431\u0440\u0430\u0443\u0437\u0435\u0440."}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{className:"text text_type_main-large pb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(x.jsx)(h,{current:m,setTab:g}),Object(x.jsx)(N,{refContainer:s,scrollHandler:O,children:f.map((function(e,n){return Object(x.jsx)(w,{type:e.type,name:e.name,data:t,refBun:i,refSauce:o,refMain:l,countOfIngredients:v},"block".concat(n))}))})]})}),[t,n,a,m,v]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("section",{className:"".concat(p.a.column," pt-10 mr-10"),children:y})})},I=n(2),C=n(11),k=n(205),F=n(206),D=n(54),P=n.n(D),U=function(e){var t,n,r=e.count,a=e.totalPrice,c=e.type;return"large"===c?(t="pr-10",n="text_type_digits-medium"):n="text_type_digits-default",Object(x.jsxs)("div",{className:"".concat(P.a.total," ").concat(t),children:[Object(x.jsx)("span",{className:"text ".concat(n," pr-2"),children:r?"".concat(r," x ").concat(a):"".concat(a)}),Object(x.jsx)("div",{className:"".concat("large"===c?P.a.icon_big:P.a.icon_def),children:Object(x.jsx)(O.CurrencyIcon,{type:"primary"})})]})},q=n(14),A=n.n(q),L="ADD_SELECTED_INGREDIENT",M="DELETE_SELECTED_INGREDIENT",G="REORDER_SELECTED_INGREDIENTS",B="CLEAR_SELECTED_INGREDIENTS",z=function(e){var t=e.type,n=e.isLocked,a=e.isDraged,c=e.name,s=e.price,i=e.image,o=e.id,l=e.customID,u=e.moveCard,j=e.index,m=Object(r.useRef)(null),_=Object(k.a)({accept:"card",collect:function(e){return{handlerID:e.getHandlerId()}},hover:function(e,t){var n;if(m.current){var r=e.index,a=j;if(r!==a){var c=null===(n=m.current)||void 0===n?void 0:n.getBoundingClientRect(),s=(c.bottom-c.top)/2,i=t.getClientOffset(),o=i?i.y-c.top:null;if(o){if(r<a&&o<s)return;if(r>a&&o>s)return}u(r,a),e.index=a}}}}),p=Object(b.a)(_,2),f=p[0].handlerID,h=p[1],v=Object(g.a)({type:"card",item:function(){return{id:o,index:j}},collect:function(e){return{isDragging:e.isDragging()}}}),y=Object(b.a)(v,2),w=y[0].isDragging;(0,y[1])(h(m));var N=d();return Object(x.jsxs)("li",{className:"mt-4 pl-8 ".concat(A.a.block," ").concat(w?A.a.block_isHover:""),ref:m,"data-handler-id":f,children:[Object(x.jsx)(O.ConstructorElement,{type:t,isLocked:n,text:c,price:s,thumbnail:i,handleClose:function(){return function(e,t){N({type:M,customID:t})}(0,l)}}),Object(x.jsx)("div",{className:A.a.icon_wrapper,children:a&&Object(x.jsx)(O.DragIcon,{type:"primary"})})]})},W=function(e){return Object(x.jsx)("ul",{className:"".concat(A.a.ingredients_list," "),children:e.children})},H=function(e){var t=e.text,n=e.marginTop;return Object(x.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-".concat(n," ml-8 pt-5 pb-5 \n        ").concat(A.a.title_message),children:t})},Q=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))};function J(e,t,n){var r="";if(n){var a=new Date;a.setTime(a.getTime()+60*n*1e3),r="; expires="+a.toUTCString()}var c=e+"="+(t="string"===typeof t?encodeURIComponent(t):"")+r+"; path=/";document.cookie=c}function X(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var V="GET_ORDER_REQUEST",Y="GET_ORDER_SUCCESS",Z="GET_ORDER_FAILED",K="ORDER_RESET";var $=function(e){return Object(x.jsx)("ul",{className:"".concat(A.a.container," "),children:e.children})},ee=function(){var e=u((function(e){return{data:e.data.data,dataSelected:e.dataSelected.dataSelected,isLoggedIn:e.user.isLoggedIn}})),t=e.data,n=e.dataSelected,a=e.isLoggedIn,c=d(),s=Object(k.a)({accept:"ingredient",drop:function(e){var r=Object(F.a)(),a="bun"!==e.type?[].concat(Object(C.a)(n),[Object(I.a)(Object(I.a)({},t.filter((function(t){return t._id===e.id}))[0]),{},{customID:r})]):[].concat(Object(C.a)(n.filter((function(e){return"bun"!==e.type}))),[Object(I.a)(Object(I.a)({},t.filter((function(t){return t._id===e.id}))[0]),{},{customID:r})]);c({type:L,newDataSelected:a})},collect:function(e){return{isHover:e.isOver()}}}),i=Object(b.a)(s,2),j=i[0].isHover,m=i[1],_=Object(r.useState)(!1),p=Object(b.a)(_,2),f=p[0],h=p[1],g=Object(r.useMemo)((function(){return n.reduce((function(e,t){return"bun"!==t.type?e+t.price:e+2*t.price}),0)}),[n]),v=Object(r.useMemo)((function(){return n.filter((function(e){return"bun"===e.type}))}),[n]),y=Object(r.useMemo)((function(){return n.filter((function(e){return"bun"!==e.type}))}),[n]),w=Object(r.useCallback)((function(e,t){c({type:G,dragIndex:e,hoverIndex:t})}),[c]);return f?Object(x.jsx)(l.a,{to:{pathname:"/login"}}):Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("section",{className:"".concat(A.a.column," ").concat(j?A.a.column_isHover:""," pt-25 pl-4"),ref:m,children:0===n.length?Object(x.jsx)(H,{text:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0431\u0443\u0440\u0433\u0435\u0440\u0430"}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)($,{children:[0!==v.length?Object(x.jsx)("li",{className:"mt-4 pl-8 ".concat(A.a.block),children:Object(x.jsx)(O.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(v[0].name," (\u0432\u0435\u0440\u0445)"),price:v[0].price,thumbnail:v[0].image})}):Object(x.jsx)(H,{text:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0431\u0443\u043b\u043a\u0443 (\u0432\u0435\u0440\u0445)",marginTop:"15"}),Object(x.jsx)("li",{children:y&&0!==y.length?Object(x.jsx)(W,{children:n.map((function(e,t){return"bun"!==e.type&&Object(x.jsx)(z,{index:t,type:void 0,name:e.name,isLocked:!1,price:e.price,image:e.image,id:e._id,customID:e.customID,isDraged:!0,moveCard:w},"".concat(t))}))}):Object(x.jsx)(H,{text:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u043d\u0430\u0447\u0438\u043d\u043a\u0443",marginTop:"5"})}),v&&0!==v.length?Object(x.jsx)("li",{className:"mt-4 pl-8 ".concat(A.a.block),children:Object(x.jsx)(O.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(v[0].name," (\u043d\u0438\u0437)"),price:v[0].price,thumbnail:v[0].image})}):Object(x.jsx)(H,{text:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0431\u0443\u043b\u043a\u0443 (\u043d\u0438\u0437)",marginTop:"5"})]}),Object(x.jsxs)("div",{className:"".concat(A.a.row_order," mt-10 mr-4"),children:[Object(x.jsx)(U,{totalPrice:g,type:"large"}),a?0!==v.length&&Object(x.jsx)(o.b,{to:{pathname:"/order"},onClick:function(e){if(a)if(0!==n.filter((function(e){return"bun"===e.type})).length){var t=[];n.map((function(e){"bun"===e.type?(t.push(e._id),t.push(e._id)):t.push(e._id)})),c(function(e){return function(t){return t({type:V}),fetch("https://norma.nomoreparties.space/api/orders",{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer "+X("accessToken")},body:JSON.stringify({ingredients:e})}).then(Q).then((function(e){t({type:Y,order:e.order})})).catch((function(e){t({type:Z})}))}}(t)),c({type:B})}else alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443");else h(!0)},className:"".concat(A.a.button," pt-5 pr-10 pb-5 pl-10 text text_type_main-default"),children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}):Object(x.jsx)(o.b,{to:{pathname:"/login"},className:"".concat(A.a.button," pt-5 pr-10 pb-5 pl-10 text text_type_main-default"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})},te=function(){return Object(x.jsxs)(j.a,{backend:m.a,children:[Object(x.jsx)(R,{}),Object(x.jsx)(ee,{})]})},ne=n(10),re=n.n(ne),ae=function(){var e=Object(l.g)(),t=Object(r.useCallback)((function(){e.replace({pathname:"/"})}),[e]);return Object(x.jsx)("div",{className:re.a.wrapper,children:Object(x.jsxs)("div",{className:re.a.container,children:[Object(x.jsxs)("div",{className:re.a.content,children:[Object(x.jsx)("h1",{className:"text text_type_main-large text_color_inactive",children:"\u041e\u0428\u0418\u0411\u041a\u0410"}),Object(x.jsx)("h2",{className:"text text_type_digits-large",children:"404"}),Object(x.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u042d\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0437\u0430 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u043c\u0438 \u0413\u0430\u043b\u0430\u043a\u0442\u0438\u043a\u0438"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-5",children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0434\u043e\u043c\u0430\u0448\u043d\u044e\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."}),Object(x.jsx)(O.Button,{type:"primary",size:"large",onClick:t,children:"\u041d\u0430 \u0434\u043e\u043c\u0430\u0448\u043d\u044e\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})]}),Object(x.jsx)("div",{className:"".concat(re.a.spin," ").concat(re.a.spin_1),children:Object(x.jsx)("div",{className:"".concat(re.a.burger," ").concat(re.a.burger_1)})}),Object(x.jsx)("div",{className:"".concat(re.a.spin," ").concat(re.a.spin_2),children:Object(x.jsx)("div",{className:"".concat(re.a.burger," ").concat(re.a.burger_2)})}),Object(x.jsx)("div",{className:"".concat(re.a.spin," ").concat(re.a.spin_3),children:Object(x.jsx)("div",{className:"".concat(re.a.burger," ").concat(re.a.burger_3)})}),Object(x.jsx)("div",{className:"".concat(re.a.spin," ").concat(re.a.spin_4),children:Object(x.jsx)("div",{className:"".concat(re.a.burger," ").concat(re.a.burger_4)})})]})})},ce=n(12),se=n.n(ce),ie=n(25),oe=n(81),le=n.n(oe),de=function(e){var t=e.children,n=e.link;return Object(x.jsx)(o.c,{exact:!0,to:{pathname:n},className:"text text_type_main-medium text_color_inactive ".concat(le.a.item),activeClassName:"text text_type_main-medium ".concat(le.a.item_active),children:t})},ue=n(55),je=n.n(ue),me=function(e){var t=e.children,n=e.style;return Object(x.jsx)("nav",{className:je.a.menu,children:Object(x.jsx)("ul",{className:"row"===n?je.a.menu_row:je.a.menu_column,children:t})})},be=n(56),_e=n.n(be),pe="https://norma.nomoreparties.space/api/",Oe="LOG_IN_REQUEST",fe="LOG_IN_SUCCESS",xe="LOG_IN_FAILED",he="LOG_OUT_REQUEST",ge="LOG_OUT_SUCCESS",ve="LOG_OUT_FAILED",ye="SIGN_IN_REQUEST",we="SIGN_IN_SUCCESS",Ne="SIGN_IN_FAILED",Se="REFRESH_TOKEN_REQUEST",Ee="REFRESH_TOKEN_SUCCESS",Te="REFRESH_TOKEN_FAILED",Re="GET_USER_DATA_REQUEST",Ie="GET_USER_DATA_SUCCESS",Ce="GET_USER_DATA_FAILED",ke="PATCH_USER_DATA_REQUEST",Fe="PATCH_USER_DATA_SUCCESS",De="PATCH_USER_DATA_FAILED",Pe="FORGOT_PASSWORD_REQUEST",Ue="FORGOT_PASSWORD_SUCCESS",qe="FORGOT_PASSWORD_FAILED",Ae="RESTORE_PASSWORD_REQUEST",Le="RESTORE_PASSWORD_SUCCESS",Me="RESTORE_PASSWORD_FAILED",Ge="RESTORE_PASSWORD_RESET",Be="USER_RESET";function ze(e){return function(t){t({type:Pe}),function(e){return fetch("".concat(pe,"password-reset"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:e})})}(e).then(Q).then((function(e){localStorage.setItem("forgotPasswordSuccess","true"),t({type:Ue,isForgotPassword:e.success})})).catch((function(e){t({type:qe})}))}}function We(e,t){return function(n){n({type:Ae}),function(e,t){return fetch("".concat(pe,"password-reset/reset"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({password:e,token:t})})}(e,t).then(Q).then((function(e){n({type:Le,isResetPassword:e.success})})).catch((function(e){n({type:Me})}))}}function He(e,t,n,r){return function(a){a({type:ye}),function(e,t,n){return fetch("".concat(pe,"auth/register"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:e,password:t,name:n})})}(e,t,n).then(Q).then((function(e){var t;0===e.accessToken.indexOf("Bearer")&&(t=e.accessToken.split("Bearer ")[1]),a({type:we}),J("accessToken",t,20),localStorage.setItem("refreshToken",e.refreshToken),r()})).catch((function(e){a({type:Ne,message:e.message})}))}}function Qe(e,t,n){return function(r){r({type:Oe}),function(e,t){return fetch("".concat(pe,"auth/login"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:e,password:t})})}(e,t).then(Q).then((function(e){var t;0===e.accessToken.indexOf("Bearer")&&(t=e.accessToken.split("Bearer ")[1]),r({type:fe}),J("accessToken",t,20),localStorage.setItem("refreshToken",e.refreshToken),n()})).catch((function(e){r({type:xe,message:e.message})}))}}function Je(){return function(e){e({type:he}),fetch("".concat(pe,"auth/logout"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(Q).then((function(t){J("accessToken",null,-1),localStorage.removeItem("refreshToken"),e({type:ge}),e({type:B})})).catch((function(t){e({type:ve})}))}}var Xe=function e(){return function(t){t({type:Re}),fetch("".concat(pe,"auth/user"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",authorization:"Bearer "+X("accessToken")},redirect:"follow",referrerPolicy:"no-referrer"}).then(Q).then((function(e){t({type:Ie,user:e.user})})).catch((function(n){"jwt malformed"===n.message?t(Ye(e())):t({type:Ce,message:n.message})}))}},Ve=function(e){return function(t){t({type:ke}),function(e){return fetch("".concat(pe,"auth/user"),{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",authorization:"Bearer "+X("accessToken")},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)})}(e).then(Q).then((function(e){t({type:Fe,user:e.user})})).catch((function(e){"jwt malformed"===e.message?t(Ye(Xe())):t({type:De,message:e.message})}))}},Ye=function(e){return function(t){t({type:Se}),fetch("".concat(pe,"auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(Q).then((function(n){var r;0===n.accessToken.indexOf("Bearer")&&(r=n.accessToken.split("Bearer ")[1]),t({type:Ee}),localStorage.setItem("refreshToken",n.refreshToken),J("accessToken",r,20),t(e())})).catch((function(e){t({type:Te})}))}},Ze=n(105);var Ke=function(e){var t=Date.parse(e),n=new Date(t),r=new Date,a=r.getUTCDate()-n.getUTCDate()===0?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":r.getUTCDate()-n.getUTCDate()===1?"\u0412\u0447\u0435\u0440\u0430":"".concat(r.getUTCDate()-n.getUTCDate()," \n       ").concat(function(e,t){var n=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:n>1&&n<5?t[1]:1==n?t[0]:t[2]}(r.getUTCDate()-n.getUTCDate(),["\u0434\u0435\u043d\u044c","\u0434\u043d\u044f","\u0434\u043d\u0435\u0439"])," \u043d\u0430\u0437\u0430\u0434"),c=n.toLocaleString("ru",{hour:"2-digit",minute:"2-digit",timeZone:"Europe/Moscow"});return"".concat(a,", ").concat(c," i-GMT+3")},$e=function(e,t,n){return{id:t,count:n,name:e.name,image:e.image_mobile,price:e.price}},et=function(e,t,n,r){var a=Object(C.a)(e).filter((function(e){return e._id===t}));if(a&&a.length)return r(a[0],t,n)},tt=function(e,t){for(var n={},r=t.reduce((function(e,t){return e[t]=(e[t]||0)+1,n}),n),a=[],c=0,s=Object.keys(r);c<s.length;c++){var i=s[c],o=et(e,i,r[i],$e);a.push(o)}return a},nt=function(e,t,n){t=t.filter((function(e){return!e.isUpdateOrder}));var r,a=Object(Ze.a)(t);try{for(a.s();!(r=a.n()).done;){var c=r.value,s=c.ingredients;if(s&&s.length){var i=tt(e,s),o=Ke(c.createdAt);return Object(I.a)(Object(I.a)({},c),{},{createdAt:o,ingredients:i,isUpdateOrder:!0})}}}catch(l){a.e(l)}finally{a.f()}},rt="WS_CONNECTION_START",at="WS_CONNECTION_SUCCESS",ct="WS_CONNECTION_FAILED",st="WS_CONNECTION_CLOSED",it="WS_GET_MESSAGE",ot="WS_UPDATE_ORDER",lt="WS_USER_CONNECTION_START",dt="WS_USER_CONNECTION_SUCCESS",ut="WS_USER_CONNECTION_FAILED",jt="WS_USER_CONNECTION_CLOSED",mt="WS_USER_GET_MESSAGE",bt="WS_USER_UPDATE_ORDER",_t=function(e){var t=e.children,n=e.textInfo,a=d(),c=u((function(e){return{data:e.data.data,orders:e.wsUser.orders}})),s=c.data,i=c.orders;Object(r.useEffect)((function(){return a({type:lt}),function(){a({type:jt})}}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(ie.a)(se.a.mark((function e(){var t,n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.filter((function(e){return!e.isUpdateOrder})),!i||0===i.length||0===t.length){e.next=6;break}return e.next=4,nt(s,t);case 4:(n=e.sent)&&n.ingredients&&a({type:bt,updateOrder:n});case 6:case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i]);return Object(x.jsxs)("section",{className:"pt-30 ".concat(_e.a.section),children:[Object(x.jsxs)("div",{className:"mr-15 ".concat(_e.a.left_column),children:[Object(x.jsx)("aside",{children:Object(x.jsx)(me,{style:"column",children:[{text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",link:"/profile"},{text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",link:"/profile/orders"},{text:"\u0412\u044b\u0445\u043e\u0434",link:"/login",onClickFunction:function(e){e.preventDefault(),a(Je())}}].map((function(e,t){return Object(x.jsx)("li",{className:"".concat(_e.a.wrapper_item),children:e.onClickFunction?Object(x.jsx)("button",{className:"text text_type_main-medium text_color_inactive &{styles.menu_item}",onClick:e.onClickFunction,children:e.text}):Object(x.jsx)(de,{link:e.link,children:Object(x.jsx)("span",{children:e.text})})},"menu".concat(t))}))})}),Object(x.jsx)("p",{className:"mt-20 text text_type_main-default text_color_inactive",children:n})]}),t]})},pt=n(22),Ot=n(57),ft=n.n(Ot),xt=function(e){var t=e.actionFunc,n=e.children,r=e.title,a=e.validateFunc,c=Object(i.b)();return Object(x.jsx)("div",{className:ft.a.wrapper,children:Object(x.jsxs)("div",{className:ft.a.container,children:[r?Object(x.jsx)("h1",{className:"text text_type_main-medium mb-6",children:r}):null,Object(x.jsx)("form",{className:ft.a.form,onSubmit:function(e){e.preventDefault(),t?c(t):a&&a()},children:n})]})})},ht=n(106),gt=n.n(ht),vt=function(e){var t=e.buttonText,n=e.link,a=e.spanText,c=e.mb,s=Object(l.g)(),i=Object(r.useCallback)((function(){s.replace({pathname:n})}),[s,n]);return Object(x.jsxs)("p",{className:"mb-".concat(c," ").concat(gt.a.link),children:[Object(x.jsx)("span",{className:"text text_type_main-default text_color_inactive mr-2",children:a}),Object(x.jsx)(O.Button,{type:"secondary",size:"medium",onClick:i,children:t})]})},yt=function(){var e=u((function(e){return{logInFailed:e.user.logInFailed,logInFailedMessage:e.user.logInFailedMessage}})),t=e.logInFailed,n=e.logInFailedMessage,a=Object(l.g)(),c=Object(l.h)(),s=Object(r.useState)({email:"",password:""}),i=Object(b.a)(s,2),o=i[0],d=i[1],j=function(e){var t=e.target;d(Object(I.a)(Object(I.a)({},o),{},Object(pt.a)({},t.name,t.value)))},m=(c.state||{from:{pathname:"/"}}).from;return Object(x.jsxs)(xt,{title:"\u0412\u0445\u043e\u0434",actionFunc:Qe(o.email,o.password,(function(){a.replace(m)})),validateFunc:void 0,children:[Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.EmailInput,{onChange:j,value:o.email,name:"email"})}),Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.PasswordInput,{onChange:j,value:o.password,name:"password"})}),t&&""!==n?Object(x.jsx)("p",{className:"text text_type_main-medium text_color_inactive mb-5",children:n.charAt(0).toUpperCase()+n.slice(1)}):Object(x.jsx)(x.Fragment,{}),Object(x.jsx)("div",{className:"mb-20",children:Object(x.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(x.jsx)(vt,{buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",link:"/register",spanText:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",mb:"4"}),Object(x.jsx)(vt,{buttonText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",link:"/forgot-password",spanText:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",mb:"0"})]})},wt=n(23),Nt=n.n(wt),St=function(){return u((function(e){return{isLoggedIn:e.user.isLoggedIn}})).isLoggedIn?Object(x.jsx)(l.a,{to:{pathname:"/"}}):Object(x.jsx)("div",{className:Nt.a.wrapper,children:Object(x.jsx)("div",{className:Nt.a.content,children:Object(x.jsx)(yt,{})})})},Et=function(){var e=u((function(e){return{registrateFailed:e.user.registrateFailed,registrateFailedMessage:e.user.registrateFailedMessage}})),t=e.registrateFailed,n=e.registrateFailedMessage,a=Object(l.g)(),c=Object(l.h)(),s=Object(r.useState)({name:"",email:"",password:""}),i=Object(b.a)(s,2),o=i[0],d=i[1],j=function(e){var t=e.target;d(Object(I.a)(Object(I.a)({},o),{},Object(pt.a)({},t.name,t.value)))},m=(c.state||{from:{pathname:"/"}}).from;return Object(x.jsxs)(xt,{title:"\u0412\u0445\u043e\u0434",actionFunc:He(o.email,o.password,o.name,(function(){a.replace(m)})),validateFunc:void 0,children:[Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:j,value:o.name,name:"name",error:!1,errorText:"",size:"default"})}),Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.EmailInput,{onChange:j,value:o.email,name:"email"})}),Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.PasswordInput,{onChange:j,value:o.password,name:"password"})}),t&&""!==n?Object(x.jsx)("p",{className:"text text_type_main-medium text_color_inactive mb-5",children:n.charAt(0).toUpperCase()+n.slice(1)}):Object(x.jsx)(x.Fragment,{}),Object(x.jsx)("div",{className:"mb-20",children:Object(x.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(x.jsx)(vt,{buttonText:"\u0412\u043e\u0439\u0442\u0438",link:"/login",spanText:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",mb:"0"})]})},Tt=function(){return Object(x.jsx)("div",{className:Nt.a.wrapper,children:Object(x.jsx)("div",{className:Nt.a.content,children:Object(x.jsx)(Et,{})})})};var Rt=function(){var e=u((function(e){return{forgotPasswordRequest:e.user.forgotPasswordRequest}})).forgotPasswordRequest,t=d(),n=Object(r.useState)({email:""}),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),o=Object(b.a)(i,2),j=o[0],m=o[1];return localStorage.getItem("forgotPasswordSuccess")?Object(x.jsx)(l.a,{to:{pathname:"/reset-password"}}):e?Object(x.jsx)(T,{}):Object(x.jsx)("div",{className:Nt.a.wrapper,children:Object(x.jsx)("div",{className:Nt.a.content,children:Object(x.jsxs)(xt,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",validateFunc:function(){var e;e=c.email,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())?t(ze(c.email)):m("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email")},actionFunc:void 0,children:[Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){var t=e.target;s(Object(I.a)(Object(I.a)({},c),{},Object(pt.a)({},t.name,t.value)))},value:c.email,name:"email",error:""!==j,errorText:j,size:"default"})}),Object(x.jsx)("div",{className:"mb-20",children:Object(x.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(x.jsx)(vt,{buttonText:"\u0412\u043e\u0439\u0442\u0438",link:"/login",spanText:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",mb:"0"})]})})})},It=function(){var e=d(),t=u((function(e){return{isResetPassword:e.user.isResetPassword}})).isResetPassword;Object(r.useEffect)((function(){return function(){e({type:Ge})}}),[]);var n=Object(r.useState)({newPassword:"",code:""}),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)("ShowIcon"),o=Object(b.a)(i,2),j=o[0],m=o[1],_=function(e){var t=e.target;s(Object(I.a)(Object(I.a)({},c),{},Object(pt.a)({},t.name,t.value)))},p=function(e){m("ShowIcon"===j?"HideIcon":"ShowIcon")};return localStorage.getItem("forgotPasswordSuccess")||t?t?(localStorage.removeItem("forgotPasswordSuccess"),Object(x.jsx)(l.a,{to:{pathname:"/login"}})):Object(x.jsx)("div",{className:Nt.a.wrapper,children:Object(x.jsx)("div",{className:Nt.a.content,children:Object(x.jsxs)(xt,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",actionFunc:We(c.newPassword,c.code),validateFunc:void 0,children:[Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.Input,{type:"ShowIcon"===j?"password":"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:_,value:c.newPassword,name:"newPassword",error:!1,onIconClick:p,errorText:"",size:"default"})}),Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:_,value:c.code,name:"code",error:!1,onIconClick:p,errorText:"",size:"default"})}),Object(x.jsx)("div",{className:"mb-20",children:Object(x.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(x.jsx)(vt,{buttonText:"\u0412\u043e\u0439\u0442\u0438",link:"/login",spanText:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",mb:"0"})]})})}):Object(x.jsx)(l.a,{to:{pathname:"/forgot-password"}})},Ct=n(82),kt=n.n(Ct),Ft=[{id:0,name:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438",measure:"\u043a\u043a\u0430\u043b",valueName:"calories"},{id:1,name:"\u0411\u0435\u043b\u043a\u0438",measure:"\u0433",valueName:"proteins"},{id:2,name:"\u0416\u0438\u0440\u044b",measure:"\u0433",valueName:"fat"},{id:3,name:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b",measure:"\u0433",valueName:"carbohydrates"}],Dt=function(e){var t=e.name,n=e.measure,r=e.value;return Object(x.jsxs)("li",{className:"text text_type_main-default text_color_inactive",children:[Object(x.jsxs)("div",{className:"".concat(kt.a.feature_row),children:[Object(x.jsx)("span",{children:"".concat(t,",")}),Object(x.jsx)("span",{children:n})]}),Object(x.jsx)("span",{children:r})]})},Pt=function(e){var t=e.children;return console.log(t),Object(x.jsx)("ul",{className:kt.a.features,children:t})},Ut=function(){var e=u((function(e){return{data:e.data.data}})).data,t=Object(l.i)().ingredientId,n=Object(r.useState)(null),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(!1),o=Object(b.a)(i,2),d=o[0],j=o[1],m=function(){var n=Object(ie.a)(se.a.mark((function n(){return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(C.a)(e).filter((function(e){return e._id===t}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){function t(){return(t=Object(ie.a)(se.a.mark((function t(){var n,r,a;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,r=null,a=!1,!e.length){t.next=9;break}return t.next=6,m();case 6:(n=t.sent)&&n.length?r=n[0]:a=!0;case 9:s(r),j(a);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[t,e]),Object(x.jsx)(x.Fragment,{children:d?Object(x.jsx)("p",{className:"text text_type_main-medium text_color_inactive mt-8",children:"\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u0441 \u0442\u0430\u043a\u0438\u043c ID \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}):null===c?Object(x.jsx)(T,{}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("img",{src:c.image_large,alt:c.name,className:"mb-4",width:"520",height:"240"}),Object(x.jsx)("h3",{className:"text text_type_main-medium mb-8",children:c.name}),Object(x.jsx)(Pt,{children:Ft.map((function(e){return Object(x.jsx)(Dt,{name:e.name,measure:e.measure,value:(t=c,n=e.valueName,t[n])},e.id);var t,n}))})]})})},qt=n(83),At=n.n(qt),Lt=function(){return Object(x.jsx)("div",{className:At.a.wrapp,children:Object(x.jsxs)("div",{className:At.a.content,children:[Object(x.jsx)("h2",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(x.jsx)(Ut,{})]})})},Mt=n(26),Gt=n.n(Mt),Bt=function(e){var t=e.children,n=e.request,a=e.requestFailed,c=e.title,s=e.type,i=Object(r.useMemo)((function(){return n?Object(x.jsx)(T,{}):a?Object(x.jsx)("div",{className:"text text_type_main-large",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0431\u0440\u0430\u0443\u0437\u0435\u0440."}):Object(x.jsx)(x.Fragment,{children:"right"===s?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{className:"text text_type_main-large pb-5",children:c}),Object(x.jsx)("div",{className:"pr-2 ".concat(Gt.a.blocks_container),"data-id":"container",children:Object(x.jsx)("ul",{className:"".concat(Gt.a.blocks_list),children:t})})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"pr-2 ".concat(Gt.a.blocks_container),"data-id":"container",children:Object(x.jsx)("ul",{className:"".concat(Gt.a.blocks_list),children:t})})})})}),[n,a]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("section",{className:"right"===s?"".concat(Gt.a.column," pt-10 mr-15"):"none"===s?"".concat(Gt.a.column," ").concat(Gt.a.column_mt_none):"".concat(Gt.a.column," pt-25"),children:i})})},zt=n(27),Wt=n.n(zt),Ht=function(e){var t=e.item,n=e.count,r=e.index,a=e.type,c="shift"===a?100-r:1,s="shift"===a?48*r:0;return"shift"===a?Object(x.jsx)("li",{className:"".concat(Wt.a.icon),style:{zIndex:c,left:"".concat(s,"px")},children:Object(x.jsxs)("div",{className:"".concat(Wt.a.icon_wrapper),children:[t?Object(x.jsx)("img",{src:t.image,alt:t.name,className:"".concat(n?Wt.a.icon_img_hidden:Wt.a.icon_img)}):Object(x.jsx)(T,{}),n&&0!==n&&Object(x.jsx)("span",{className:" text text_type_digits-default ".concat(Wt.a.icon_count),children:"+".concat(n)})]})}):Object(x.jsx)("div",{className:"".concat(Wt.a.icon_full),children:t?Object(x.jsx)("div",{className:"".concat(Wt.a.icon_wrapper),children:Object(x.jsx)("img",{src:t.image,alt:t.name,className:Wt.a.icon_img})}):Object(x.jsx)(T,{})})},Qt=n(31),Jt=n.n(Qt),Xt=function(e){var t=e.children;return Object(x.jsx)("ul",{className:"mr-6 ".concat(Jt.a.card_list," "),children:t})},Vt=function(e){var t=e.orderInfo,n=e.page,a=t.createdAt,c=t._id,s=t.ingredients,i=t.name,d=t.number,u=Object(l.h)(),j=Object(r.useMemo)((function(){return s&&s.length?s.filter((function(e){return e&&e.price})).reduce((function(e,t){return e+t.price*t.count}),0):0}),[s]),m=Object(r.useMemo)((function(){return s&&Object(x.jsx)(Xt,{children:s.filter((function(e,t){return t<=7})).map((function(e,t){return e&&Object(x.jsx)(Ht,{item:e,index:t,count:1===e.count?0:e.count,type:"shift"},"".concat(e.id))}))})}),[s]),b="profile"!==n?"feed":"profile/orders";return Object(x.jsx)(o.b,{to:{pathname:"/".concat(b,"/").concat(d),state:{background:u}},className:Jt.a.link,children:Object(x.jsxs)("div",{className:"pt-6 pr-6 pb-6 pl-6 ".concat(Jt.a.card_wrapper),children:[Object(x.jsxs)("div",{className:"mb-6 ".concat(Jt.a.card_row),children:[Object(x.jsx)("span",{className:"text text_type_digits-default",children:"#".concat(d)}),Object(x.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:a})]}),Object(x.jsx)("h3",{className:"text text_type_main-medium mb-6",children:i}),Object(x.jsxs)("div",{className:"".concat(Jt.a.card_row," ").concat(Jt.a.card_row_big),children:[m,Object(x.jsx)(U,{totalPrice:j,type:"def"})]})]})},c)},Yt=function(e){var t=e.page,n=u((function(e){return{ordersAll:e.ws.orders,ordersUser:e.wsUser.orders}})),a=n.ordersAll,c=n.ordersUser,s=Object(l.h)().pathname.includes("profile")?c&&c.length?c:null:a,i=Object(r.useMemo)((function(){if(s&&s.length)return s.filter((function(e){return!0===e.isUpdateOrder}))}),[s]);return Object(x.jsx)(x.Fragment,{children:i&&i.length?i.map((function(e,n){return Object(x.jsx)("li",{className:"mb-4",children:Object(x.jsx)(Vt,{orderInfo:e,page:t})},"".concat(e._id).concat(n))})):s&&s.length?Object(x.jsx)(T,{}):Object(x.jsx)("p",{className:"mt-20 text text_type_main-medium",children:"\u0423 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})},Zt=function(e){var t=e.page;return Object(x.jsx)(Bt,{request:!1,requestFailed:!1,title:"feed"===t?"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432":null,type:"feed"===t?"right":"none",children:Object(x.jsx)(Yt,{page:t})})},Kt=n(32),$t=n.n(Kt),en=function(e){var t=e.orders,n=e.type;return Object(x.jsxs)("div",{className:"done"===n?"".concat($t.a.column_wrapper," mr-9"):"".concat($t.a.column_wrapper),children:[Object(x.jsx)("h3",{className:"mb-6 text text_type_main-medium",children:"done"===n?"\u0413\u043e\u0442\u043e\u0432\u044b:":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),t.length?Object(x.jsx)("div",{className:$t.a.orders,children:Object(x.jsx)("ul",{className:$t.a.orders_list,children:t.map((function(e,t){return Object(x.jsx)("li",{className:"mb-2",children:Object(x.jsx)("span",{className:"done"===n?"text text_type_digits-default ".concat($t.a.item_done):"text text_type_digits-default",children:e.number})},t)}))})}):Object(x.jsx)("div",{className:"text text_type_main-default",children:"\u0417\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435\u0442"})]})},tn=function(e){var t=e.title,n=e.total,r=e.style;return Object(x.jsxs)("div",{className:r,children:[Object(x.jsx)("h3",{className:"text text_type_main-medium",children:t}),Object(x.jsx)("p",{className:"text text_type_digits-large",children:n})]})},nn=function(){var e=u((function(e){return{orders:e.ws.orders,total:e.ws.total,totalToday:e.ws.totalToday}})),t=e.orders,n=e.total,a=e.totalToday,c=Object(r.useMemo)((function(){if(t.length)return t.filter((function(e){return"done"===e.status})).filter((function(e,t){return t<=9}))}),[t]),s=Object(r.useMemo)((function(){if(t.length)return t.filter((function(e){return"done"!==e.status})).filter((function(e,t){return t<=9}))}),[t]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"mb-15 ".concat($t.a.summury_status),children:[c&&Object(x.jsx)(en,{type:"done",orders:c}),s&&Object(x.jsx)(en,{type:"created",orders:s})]}),n&&Object(x.jsx)(tn,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:",total:n,style:"mb-15"}),a&&Object(x.jsx)(tn,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:",total:a,style:""})]})},rn=function(){return Object(x.jsx)(Bt,{request:!1,requestFailed:!1,type:"",children:Object(x.jsx)(nn,{})})},an=function(){var e=d(),t=u((function(e){return{data:e.data.data,orders:e.ws.orders}})),n=t.data,a=t.orders;return Object(r.useEffect)((function(){return e({type:rt}),function(){e({type:st})}}),[]),Object(r.useEffect)((function(){function t(){return(t=Object(ie.a)(se.a.mark((function t(){var r,c;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a&&a.length&&(r=a.filter((function(e){return!e.isUpdateOrder}))),!r||0===r.length){t.next=7;break}return t.next=4,nt(n,r);case 4:(c=t.sent)&&c.ingredients&&e({type:ot,updateOrder:c});case 7:case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[a]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Zt,{page:"feed"}),Object(x.jsx)(rn,{})]})},cn="GET_ORDER_INFO_REQUEST",sn="GET_ORDER_INFO_SUCCESS",on="GET_ORDER_INFO_FAILED",ln="UPDATE_ORDER_INFO";function dn(e){return function(t){return t({type:cn}),fetch("".concat("https://norma.nomoreparties.space/api/orders/").concat(e)).then(Q).then((function(e){t({type:sn,orders:e.orders})})).catch((function(e){t({type:on})}))}}var un=n(58),jn=n.n(un),mn=function(e){var t=e.index,n=e.item;return Object(x.jsxs)("li",{className:"mb-4 ".concat(jn.a.item),children:[Object(x.jsx)(Ht,{index:t,item:n,type:"full"}),Object(x.jsx)("h5",{className:"text text_type_main-default ml-4 mr-4 ".concat(jn.a.item_title),children:n.name}),Object(x.jsx)("div",{className:jn.a.total,children:Object(x.jsx)(U,{count:n.count,totalPrice:n.price,type:"def"})})]})},bn=n(28),_n=n.n(bn),pn=function(){var e=d(),t=u((function(e){return{data:e.data.data,ordersAll:e.ws.orders,ordersUser:e.wsUser.orders,order:e.orderInfo.orderInfo}})),n=t.data,a=t.ordersAll,c=t.ordersUser,s=t.order,i=Object(l.h)().pathname.includes("profile")?c&&c.length?c:null:a,o=Object(l.i)().orderNumber,j=Object(r.useState)(null),m=Object(b.a)(j,2),_=m[0],p=m[1],O=Object(r.useState)(!1),f=Object(b.a)(O,2),h=f[0],g=f[1],v=function(){var e=Object(ie.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)(i).filter((function(e){return String(e.number)===o}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){function t(){return(t=Object(ie.a)(se.a.mark((function t(){var n,r,a;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,a=!1,!i||!i.length){t.next=9;break}return t.next=5,v();case 5:(n=t.sent)&&n.length?n[0].isUpdateOrder?r=n[0]:console.log("\u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c"):a=!0,t.next=10;break;case 9:e(dn(o));case 10:p(r),g(a);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){function t(){return(t=Object(ie.a)(se.a.mark((function t(){var r,a;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,!1,!(s&&s.length&&n&&n.length)){t.next=8;break}return t.next=5,nt(n,s);case 5:(a=t.sent)&&a.ingredients&&e({type:ln,updateOrder:a}),s[0].isUpdateOrder?r=s[0]:console.log("\u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c");case 8:p(r);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n,s]);var y=Object(r.useMemo)((function(){if(_&&_.ingredients&&_.ingredients.length){return _.ingredients.filter((function(e){return!!e})).reduce((function(e,t){return e+t.price*t.count}),0)}}),[_]),w=Object(r.useMemo)((function(){var e=_;if(e&&e.ingredients.length){var t=e.ingredients;return t.length&&t.filter((function(e){return!!e})).map((function(e,t){return Object(x.jsx)(mn,{item:e,index:t},"".concat(t))}))}}),[_]);return Object(x.jsx)(x.Fragment,{children:h?Object(x.jsx)("p",{className:"text text_type_main-medium text_color_inactive mt-8",children:"\u0417\u0430\u043a\u0430\u0437 \u0441 \u0442\u0430\u043a\u0438\u043c ID \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}):_?Object(x.jsxs)("div",{className:_n.a.content,children:[Object(x.jsx)("h3",{className:"mb-10 text text_type_digits-default ".concat(_n.a.title),children:"#".concat(_.number)}),Object(x.jsx)("h4",{className:"mb-3 text text_type_main-medium ".concat(_n.a.name),children:_.name}),Object(x.jsx)("p",{className:"mb-15 text text_type_main-default \n                ".concat("done"!==_.status?_n.a.status_green:_n.a.status),children:"done"===_.status?"\u0413\u043e\u0442\u043e\u0432":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(x.jsx)("h4",{className:"mb-6 text text_type_main-medium ".concat(_n.a.name),children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(x.jsx)("div",{className:"mb-10",children:Object(x.jsx)("ul",{className:"pr-4 ".concat(_n.a.ingredients_list),children:w})}),Object(x.jsxs)("div",{className:_n.a.row,children:[Object(x.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:_.createdAt}),y&&Object(x.jsx)(U,{totalPrice:y,type:"def"})]})]}):Object(x.jsx)(T,{})})},On=n(107),fn=n.n(On),xn=function(){return Object(x.jsx)("div",{className:fn.a.wrapper,children:Object(x.jsx)(pn,{})})},hn=n(48),gn=n.n(hn),vn=n(84),yn=n.n(vn),wn=function(e){var t=e.icon,n=e.text,r=e.type;return Object(x.jsxs)("div",{className:"pr-5 pl-5 ".concat(yn.a.link),children:[Object(x.jsx)("div",{className:yn.a.link_icon,children:t}),n&&Object(x.jsx)("span",{className:"text text_type_main-default pl-2 ".concat(r),children:n})]})},Nn=function(){var e=u((function(e){return{isLoggedIn:e.user.isLoggedIn}})).isLoggedIn;return Object(x.jsx)("div",{className:gn.a.wrapper,children:Object(x.jsx)("div",{className:gn.a.container,children:Object(x.jsx)("header",{className:"header",children:Object(x.jsx)("div",{className:"pt-4 pb-4",children:Object(x.jsxs)("div",{className:gn.a.header_content,children:[Object(x.jsx)(me,{style:"row",children:[{icon:Object(x.jsx)(O.BurgerIcon,{type:"secondary"}),text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",link:"/"},{icon:Object(x.jsx)(O.ListIcon,{type:"secondary"}),text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",link:"/feed"}].map((function(e,t){return Object(x.jsx)("li",{className:"mr-2",children:Object(x.jsx)(de,{link:e.link,children:Object(x.jsx)(wn,{icon:e.icon,text:e.text})})},"menu".concat(t))}))}),Object(x.jsxs)("div",{className:gn.a.elements_wrapper,children:[Object(x.jsx)(o.b,{to:"/",children:Object(x.jsx)(O.Logo,{})}),Object(x.jsx)(de,{link:e?"/profile":"/login",children:Object(x.jsx)(wn,{icon:e?Object(x.jsx)(O.ProfileIcon,{type:"secondary"}):Object(x.jsx)(O.ListIcon,{type:"secondary"}),text:e?"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442":"\u0412\u043e\u0439\u0442\u0438"})})]})]})})})})})},Sn=n(108),En=n.n(Sn),Tn=function(e){var t=e.handleModalClose,n=e.children,a=function(e){27===e.keyCode&&t()};return Object(r.useEffect)((function(){return document.addEventListener("keydown",a),function(){document.removeEventListener("keydown",a)}}),[]),Object(x.jsx)("div",{className:En.a.overlay,onClick:t,children:n})},Rn=n(40),In=n.n(Rn),Cn=document.getElementById("react-modals"),kn=function(e){var t=e.handleModalClose,n=e.title,r=e.children,a=e.width;return Object(c.createPortal)(Object(x.jsx)(Tn,{handleModalClose:t,children:Object(x.jsxs)("div",{className:"pt-10 pr-10 pb-15 pl-10 ".concat(In.a.modal),onClick:function(e){return e.stopPropagation()},children:[Object(x.jsxs)("div",{className:In.a.modal_row,children:[Object(x.jsx)("h2",{className:"text text_type_main-large",children:n}),Object(x.jsx)("div",{className:In.a.icon_wrapper,onClick:t,children:Object(x.jsx)(O.CloseIcon,{type:"primary"})})]}),Object(x.jsx)("div",{className:"".concat(In.a.wrapper," ").concat(a&&In.a.wrapper_wide),children:r})]})}),Cn)},Fn=n(39),Dn=["children"],Pn=function(e){var t=e.children,n=Object(Fn.a)(e,Dn);return Object(x.jsx)(l.b,Object(I.a)(Object(I.a)({},n),{},{render:function(){return localStorage.getItem("refreshToken")?Object(x.jsx)(l.a,{to:{pathname:"/"}}):t}}))},Un=n(109),qn=n.n(Un),An=function(){var e=u((function(e){return{order:e.order.order,orderRequest:e.order.orderRequest,orderFailed:e.order.orderFailed}})),t=e.order,n=e.orderRequest,a=e.orderFailed,c=d();Object(r.useEffect)((function(){return function(){c({type:K})}}),[]);var s=Object(r.useMemo)((function(){return n?Object(x.jsx)(T,{}):a?Object(x.jsx)("p",{className:"text text_type_main-medium",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0442\u0435\u0445\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443."}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text text_type_digits-large mb-8",children:t.number}),Object(x.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(x.jsx)("div",{className:"mb-15 ".concat(qn.a.icon_wrapper),children:Object(x.jsx)(O.CheckMarkIcon,{type:"primary"})}),Object(x.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(x.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})}),[t,a,n]);return Object(x.jsx)(x.Fragment,{children:s})},Ln=["children"],Mn=function(e){var t=e.children,n=Object(Fn.a)(e,Ln),r=u((function(e){return{isLoggedIn:e.user.isLoggedIn}})).isLoggedIn;return Object(x.jsx)(l.b,Object(I.a)(Object(I.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(x.jsx)(l.a,{to:{pathname:"/login",state:{from:n}}})}}))},Gn=n(110),Bn=n.n(Gn),zn=function(){var e=d(),t=u((function(e){return{user:e.user.user,userDataRequest:e.user.userDataRequest,userDataFailed:e.user.userDataFailed,userDataFailedMessage:e.user.userDataFailedMessage,refreshTokenFailed:e.user.refreshTokenFailed}})),n=t.user,a=t.userDataRequest,c=t.userDataFailed,s=t.userDataFailedMessage,i=t.refreshTokenFailed,o=Object(r.useRef)(null);Object(r.useEffect)((function(){n||e(Xe())}),[e]);var l=Object(r.useState)({name:"",email:"",password:""}),j=Object(b.a)(l,2),m=j[0],_=j[1],p=Object(r.useState)({}),f=Object(b.a)(p,2),h=f[0],g=f[1],v=Object(r.useState)(!0),y=Object(b.a)(v,2),w=y[0],N=y[1];Object(r.useEffect)((function(){_(Object(I.a)(Object(I.a)({},m),{},{name:n.name,email:n.email}))}),[n]),Object(r.useEffect)((function(){var e={};""!==m.password&&(e=Object(I.a)(Object(I.a)({},e),{},{password:m.password})),n.name!==m.name&&(e=Object(I.a)(Object(I.a)({},e),{},{name:m.name})),n.email!==m.email&&(e=Object(I.a)(Object(I.a)({},e),{},{email:m.email})),g(e)}),[m]);var S=function(e){var t=e.target;_(Object(I.a)(Object(I.a)({},m),{},Object(pt.a)({},t.name,t.value)))};return Object(x.jsx)(x.Fragment,{children:a?i?Object(x.jsx)("div",{className:"text text_type_main-default text_color_inactive mr-2",children:"\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}):Object(x.jsx)(T,{}):Object(x.jsxs)(xt,{actionFunc:Ve(h),validateFunc:void 0,children:[Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.Input,{disabled:w,type:"text",placeholder:"\u0418\u043c\u044f",onChange:S,icon:"EditIcon",value:m.name,name:"name",error:!1,ref:o,onIconClick:function(){o.current&&setTimeout((function(){return o.current.focus()}),0),N(!1)},errorText:"",size:"default",onBlur:function(){N(!0)}})}),Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.EmailInput,{onChange:S,value:m.email,name:"email"})}),Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsx)(O.PasswordInput,{onChange:S,value:m.password,name:"password"})}),c&&""!==s?Object(x.jsx)("p",{className:"text text_type_main-medium text_color_inactive mb-5",children:s.charAt(0).toUpperCase()+s.slice(1)}):Object(x.jsx)(x.Fragment,{}),Object(x.jsxs)("div",{className:"mb-20 ".concat(Bn.a.row),children:[Object(x.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(x.jsx)(O.Button,{type:"primary",size:"medium",onClick:function(){_(Object(I.a)(Object(I.a)({},m),{},{name:n.name,email:n.email,password:""}))},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})})},Wn=n(111),Hn=n.n(Wn),Qn="GET_INGREDIENTS_REQUEST",Jn="GET_INGREDIENTS_SUCCESS",Xn="GET_INGREDIENTS_FAILED",Vn=function(){return function(e){return e({type:Qn}),fetch("https://norma.nomoreparties.space/api/ingredients").then(Q).then((function(t){var n;e((n=t.data,{type:Jn,data:n}))})).catch((function(t){e({type:Xn})}))}};function Yn(){var e=Object(l.h)(),t=Object(l.g)(),n=("PUSH"===t.action||"REPLACE"===t.action)&&e.state&&e.state.background,r=function(){t.goBack()};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Nn,{}),Object(x.jsxs)("main",{className:"".concat(Hn.a.main),children:[Object(x.jsxs)(l.d,{location:n||e,children:[Object(x.jsx)(l.b,{path:"/",exact:!0,children:Object(x.jsx)(te,{})}),Object(x.jsx)(l.b,{path:"/feed",exact:!0,children:Object(x.jsx)(an,{})}),Object(x.jsx)(Pn,{path:"/login",exact:!0,children:Object(x.jsx)(St,{})}),Object(x.jsx)(Pn,{path:"/register",exact:!0,children:Object(x.jsx)(Tt,{})}),Object(x.jsx)(Pn,{path:"/forgot-password",exact:!0,children:Object(x.jsx)(Rt,{})}),Object(x.jsx)(Pn,{path:"/reset-password",exact:!0,children:Object(x.jsx)(It,{})}),Object(x.jsx)(Mn,{path:"/profile",exact:!0,children:Object(x.jsx)(_t,{textInfo:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",children:Object(x.jsx)(zn,{})})}),Object(x.jsx)(l.b,{path:"/ingredients/:ingredientId",exact:!0,children:Object(x.jsx)(Lt,{})}),Object(x.jsx)(l.b,{path:"/feed/:orderNumber",exact:!0,children:Object(x.jsx)(xn,{})}),Object(x.jsx)(Mn,{path:"/profile/orders",exact:!0,children:Object(x.jsx)(_t,{textInfo:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432",children:Object(x.jsx)(Zt,{page:"profile"})})}),Object(x.jsx)(l.b,{path:"/profile/orders/:orderNumber",children:Object(x.jsx)(xn,{}),exact:!0}),Object(x.jsx)(Mn,{path:"/order",children:Object(x.jsx)(kn,{handleModalClose:r,children:Object(x.jsx)(An,{})})}),Object(x.jsx)(l.b,{children:Object(x.jsx)(ae,{})})]}),n&&Object(x.jsx)(l.b,{path:"/ingredients/:ingredientId",children:Object(x.jsx)(kn,{handleModalClose:r,title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(x.jsx)(Ut,{})})}),n&&Object(x.jsx)(Mn,{path:"/profile/orders/:orderNumber",children:Object(x.jsx)(kn,{handleModalClose:r,title:"",width:"640",children:Object(x.jsx)(pn,{})})}),n&&Object(x.jsx)(l.b,{path:"/feed/:orderNumber",children:Object(x.jsx)(kn,{handleModalClose:r,title:"",width:"640",children:Object(x.jsx)(pn,{})})})]})]})}var Zn=function(){var e=d(),t=localStorage.getItem("refreshToken");return Object(r.useEffect)((function(){t&&e(Xe()),e(Vn())}),[]),Object(x.jsx)(o.a,{children:Object(x.jsx)(Yn,{})})},Kn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,207)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},$n=n(30),er=n(112),tr={data:[],dataRequest:!1,dataFailed:!1},nr={dataSelected:[]},rr={order:{},orderRequest:!1,orderFailed:!1},ar={orderRequest:!1,orderRequestSuccess:!1,orderRequestFailed:!1,orderInfo:[]},cr={user:{name:"",email:""},userDataRequest:!1,userDataFailed:!1,userDataFailedMessage:"",isLoggedIn:!1,logInRequest:!1,logInFailed:!1,logInFailedMessage:"",logOutRequest:!1,logOutFailed:!1,registrateRequest:!1,registrateFailed:!1,registrateFailedMessage:"",refreshTokenRequest:!1,refreshTokenFailed:!1,isForgotPassword:!1,forgotPasswordRequest:!1,forgotPasswordFailed:!1,isResetPassword:!1,resetPasswordRequest:!1,resetPasswordFailed:!1},sr={wsConnected:!1,wsConnectionRequest:!1,wsConnectionFailed:!1,orders:[],total:null,totalToday:null},ir={wsConnected:!1,wsConnectionRequest:!1,wsConnectionFailed:!1,orders:[],total:null,totalToday:null},or=Object($n.b)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qn:return Object(I.a)(Object(I.a)({},e),{},{dataRequest:!0});case Jn:return Object(I.a)(Object(I.a)({},e),{},{data:t.data,dataRequest:!1,dataFailed:!1});case Xn:return Object(I.a)(Object(I.a)({},e),{},{dataFailed:!0});default:return e}},dataSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(I.a)(Object(I.a)({},e),{},{dataSelected:Object(C.a)(t.newDataSelected)});case M:return Object(I.a)(Object(I.a)({},e),{},{dataSelected:Object(C.a)(e.dataSelected.filter((function(e){return e.customID!==t.customID})))});case G:var n=Object(C.a)(e.dataSelected);return n.splice(t.hoverIndex,0,n.splice(t.dragIndex,1)[0]),Object(I.a)(Object(I.a)({},e),{},{dataSelected:n});case B:return Object(I.a)(Object(I.a)({},e),{},{dataSelected:[]});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(I.a)(Object(I.a)({},e),{},{orderRequest:!0});case Y:return Object(I.a)(Object(I.a)({},e),{},{order:t.order,orderRequest:!1,orderFailed:!1});case Z:return Object(I.a)(Object(I.a)({},e),{},{orderFailed:!0});case K:return Object(I.a)(Object(I.a)({},e),{},{order:{},orderRequest:!1,orderFailed:!1});default:return e}},orderInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cn:return Object(I.a)(Object(I.a)({},e),{},{orderRequest:!0});case sn:return Object(I.a)(Object(I.a)({},e),{},{orderRequest:!1,orderRequestSuccess:!0,orderInfo:t.orders});case on:return Object(I.a)(Object(I.a)({},e),{},{orderRequest:!1,orderFailed:!0});case ln:return Object(I.a)(Object(I.a)({},e),{},{orderInfo:[t.updateOrder]});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Object(I.a)(Object(I.a)({},e),{},{logInRequest:!0});case fe:return Object(I.a)(Object(I.a)({},e),{},{isLoggedIn:!0,logInRequest:!1,logInFailed:!1});case xe:return Object(I.a)(Object(I.a)({},e),{},{logInFailed:!0,logInRequest:!1,logInFailedMessage:t.message});case he:return Object(I.a)(Object(I.a)({},e),{},{logOutRequest:!0});case ge:return Object(I.a)(Object(I.a)({},e),{},{isLoggedIn:!1,logOutRequest:!1,logOutFailed:!1,user:{name:"",email:""}});case ve:return Object(I.a)(Object(I.a)({},e),{},{logOutFailed:!0});case ye:return Object(I.a)(Object(I.a)({},e),{},{registrateRequest:!0});case we:return Object(I.a)(Object(I.a)({},e),{},{isLoggedIn:!0,registrateRequest:!1,registrateFailed:!1});case Ne:return Object(I.a)(Object(I.a)({},e),{},{registrateRequest:!1,registrateFailed:!0,registrateFailedMessage:t.message});case Se:return Object(I.a)(Object(I.a)({},e),{},{refreshTokenRequest:!0});case Ee:return Object(I.a)(Object(I.a)({},e),{},{refreshTokenRequest:!1,refreshTokenFailed:!1});case Te:return Object(I.a)(Object(I.a)({},e),{},{refreshTokenRequest:!1,refreshTokenFailed:!0});case Re:case ke:return Object(I.a)(Object(I.a)({},e),{},{userDataRequest:!0});case Ie:case Fe:return Object(I.a)(Object(I.a)({},e),{},{isLoggedIn:!0,user:t.user,userDataRequest:!1,userDataFailed:!1});case Ce:case De:return Object(I.a)(Object(I.a)({},e),{},{userDataFailed:!0,userDataRequest:!1,userDataFailedMessage:t.message});case Pe:return Object(I.a)(Object(I.a)({},e),{},{forgotPasswordRequest:!0});case Ue:return Object(I.a)(Object(I.a)({},e),{},{isForgotPassword:t.isForgotPassword,forgotPasswordRequest:!1,forgotPasswordFailed:!1});case qe:return Object(I.a)(Object(I.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordFailed:!0});case Ae:return Object(I.a)(Object(I.a)({},e),{},{resetPasswordRequest:!0});case Le:return Object(I.a)(Object(I.a)({},e),{},{isResetPassword:t.isResetPassword,resetPasswordRequest:!1,resetPasswordFailed:!1});case Me:return Object(I.a)(Object(I.a)({},e),{},{resetPasswordRequest:!1,resetPasswordFailed:!0});case Ge:return Object(I.a)(Object(I.a)({},e),{},{isForgotPassword:!1,forgotPasswordRequest:!1,forgotPasswordFailed:!1,isResetPassword:!1,resetPasswordRequest:!1,resetPasswordFailed:!1});case Be:return{user:{name:"",email:""},userDataRequest:!1,userDataFailed:!1,userDataFailedMessage:"",isLoggedIn:!1,logInRequest:!1,logInFailed:!1,logInFailedMessage:"",logOutRequest:!1,logOutFailed:!1,registrateRequest:!1,registrateFailed:!1,registrateFailedMessage:"",refreshTokenRequest:!1,refreshTokenFailed:!1,isForgotPassword:!1,forgotPasswordRequest:!1,forgotPasswordFailed:!1,isResetPassword:!1,resetPasswordRequest:!1,resetPasswordFailed:!1};default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:return Object(I.a)(Object(I.a)({},e),{},{wsConnectionRequest:!0});case at:return Object(I.a)(Object(I.a)({},e),{},{wsConnectionRequest:!1,wsConnected:!0});case ct:return Object(I.a)(Object(I.a)({},e),{},{wsConnected:!1,wsConnectionRequest:!1,wsConnectionFailed:!0});case st:return Object(I.a)(Object(I.a)({},e),{},{wsConnected:!1});case it:var n=e.orders;if(e.orders&&e.orders.length){var r,a=t.payload.orders.findIndex((function(t){return t._id===e.orders[0]._id}));if(0!==a&&a)(r=n).unshift.apply(r,Object(C.a)(t.payload.orders.slice(0,a)));else n=t.payload.orders}else n=t.payload.orders;return Object(I.a)(Object(I.a)({},e),{},{orders:n,total:t.payload.total,totalToday:t.payload.totalToday});case ot:return Object(I.a)(Object(I.a)({},e),{},{orders:[].concat(Object(C.a)(e.orders.filter((function(e){return e._id!==t.updateOrder._id}))),[t.updateOrder])});default:return e}},wsUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case lt:return Object(I.a)(Object(I.a)({},e),{},{wsConnectionRequest:!0});case dt:return Object(I.a)(Object(I.a)({},e),{},{wsConnectionRequest:!1,wsConnected:!0});case ut:return Object(I.a)(Object(I.a)({},e),{},{wsConnected:!1,wsConnectionRequest:!1,wsConnectionFailed:!0});case jt:return Object(I.a)(Object(I.a)({},e),{},{wsConnected:!1});case mt:var n=e.orders;if(e.orders&&e.orders.length){var r,a=t.payload.orders.findIndex((function(t){return t._id===e.orders[0]._id}));if(0!==a&&a)(r=n).unshift.apply(r,Object(C.a)(t.payload.orders.slice(0,a)));else n=t.payload.orders}else n=t.payload.orders;return Object(I.a)(Object(I.a)({},e),{},{orders:n,total:t.payload.total,totalToday:t.payload.totalToday});case bt:return Object(I.a)(Object(I.a)({},e),{},{orders:[].concat(Object(C.a)(e.orders.filter((function(e){return e._id!==t.updateOrder._id}))),[t.updateOrder])});default:return e}}}),lr=["success"],dr=function(e,t,n){return function(r){var a=null;return function(c){return function(s){var i=r.dispatch,o=s.type,l=t.wsInit,d=t.onOpen,u=t.onMessage,j=t.onClose,m=t.onError,b=X("accessToken");n?o===l&&b&&(a=new WebSocket("".concat(e,"?token=").concat(b))):o===l&&(a=new WebSocket("".concat(e))),a&&(a.onopen=function(e){i({type:d,payload:e})},a.onerror=function(e){i({type:m,payload:e})},a.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(Fn.a)(n,lr));i({type:u,payload:r})},a.onclose=function(e){i({type:j,payload:e})}),c(s)}}}},ur={wsInit:rt,onOpen:at,onMessage:it,onClose:st,onError:ct},jr={wsInit:lt,onOpen:dt,onMessage:mt,onClose:jt,onError:ut},mr=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$n.c)(Object($n.a)(er.a,dr("wss://norma.nomoreparties.space/orders/all",ur,!1),dr("wss://norma.nomoreparties.space/orders",jr,!0))),br=Object($n.d)(or,mr);s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(i.a,{store:br,children:Object(x.jsx)(Zn,{})})}),document.getElementById("root")),Kn()},23:function(e,t,n){e.exports={wrapper:"login_wrapper__34T4W",content:"login_content__3GouL"}},26:function(e,t,n){e.exports={column:"column_column__1Kgiz",column_mt_none:"column_column_mt_none__3Eykg",blocks_container:"column_blocks_container__dAJlu",blocks_list:"column_blocks_list__1C5vo"}},27:function(e,t,n){e.exports={icon:"ingredient-icon_icon__1eQHR",icon_wrapper:"ingredient-icon_icon_wrapper__1mPmU",icon_img:"ingredient-icon_icon_img__3TVHL",icon_img_hidden:"ingredient-icon_icon_img_hidden__1orRs",icon_count:"ingredient-icon_icon_count__1ZiPU"}},28:function(e,t,n){e.exports={content:"feed-info-details_content__50Lov",title:"feed-info-details_title__2uh5s",name:"feed-info-details_name__1-hgv",status:"feed-info-details_status__3xzyk",status_green:"feed-info-details_status_green__pif07",ingredients_list:"feed-info-details_ingredients_list__1ExIp",row:"feed-info-details_row__2xYwC"}},31:function(e,t,n){e.exports={card_wrapper:"order-card_card_wrapper__1tW4S",card_row:"order-card_card_row__3neCy",card_row_big:"order-card_card_row_big__t5-ed",card_list:"order-card_card_list__Jzxrr",link:"order-card_link__3ax6Z"}},32:function(e,t,n){e.exports={summury_status:"summury-of-orders_summury_status__22SmB",column_wrapper:"summury-of-orders_column_wrapper__y4cUn",orders_list:"summury-of-orders_orders_list__2MAj3",item_done:"summury-of-orders_item_done__4dFNR"}},40:function(e,t,n){e.exports={modal:"modal_modal__3EgZc",modal_row:"modal_modal_row__2nRFp",icon_wrapper:"modal_icon_wrapper__kIxgC",wrapper:"modal_wrapper__3EElm",wrapper_wide:"modal_wrapper_wide__3Ozhd"}},48:function(e,t,n){e.exports={wrapper:"app-header_wrapper__vWa44",container:"app-header_container__2DegG",header_content:"app-header_header_content__3QI9q",elements_wrapper:"app-header_elements_wrapper__170yO"}},54:function(e,t,n){e.exports={total:"total-price_total__36oDQ",icon_big:"total-price_icon_big__1szQ3",icon_def:"total-price_icon_def__kyQl9"}},55:function(e,t,n){e.exports={menu_row:"menu_menu_row___JLvQ",menu_column:"menu_menu_column__134wB"}},56:function(e,t,n){e.exports={section:"profile_section__1Aa_c",left_column:"profile_left_column__38CNV",wrapper_item:"profile_wrapper_item__11w9-"}},57:function(e,t,n){e.exports={wrapper:"form-wrapper_wrapper__3l37B",container:"form-wrapper_container__3xED_",form:"form-wrapper_form__PtkoS"}},58:function(e,t,n){e.exports={item:"ingredient-item_item__3F6k6",item_title:"ingredient-item_item_title__jn0FW",total:"ingredient-item_total__370Tc"}},81:function(e,t,n){e.exports={item:"nav-item_item__xBzFq",item_active:"nav-item_item_active__3I3v1"}},82:function(e,t,n){e.exports={features:"ingredient-details_features__12TiG"}},83:function(e,t,n){e.exports={wrapp:"ingredient_wrapp__1748e",content:"ingredient_content__2y48l"}},84:function(e,t,n){e.exports={menu_item:"element-with-icon_menu_item__2Pzzg",menu_item_active:"element-with-icon_menu_item_active__1wCxg",link:"element-with-icon_link__Ab059",link_icon:"element-with-icon_link_icon__KmiFT"}}},[[197,1,2]]]);
//# sourceMappingURL=main.e77c3b2d.chunk.js.map